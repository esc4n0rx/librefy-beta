{
    "api_documentation": {
      "base_url": "http://localhost:3000",
      "version": "v1",
      "description": "API do Librefy - Sistema de leitura e escrita de livros",
      "authentication": "JWT Bearer Token",
      "content_type": "application/json",
      
      "endpoints": {
        
        "health_check": {
          "method": "GET",
          "url": "/health",
          "description": "Verificar status da API",
          "authentication": false,
          "request": {
            "headers": {},
            "body": null
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Librefy API está funcionando",
                "version": "1.0.0",
                "timestamp": "2025-09-24T14:30:00.000Z"
              }
            }
          }
        },
  
        "register": {
          "method": "POST",
          "url": "/v1/auth/register",
          "description": "Registrar novo usuário",
          "authentication": false,
          "request": {
            "headers": {
              "Content-Type": "application/json"
            },
            "body": {
              "name": "João Silva",
              "username": "joaosilva",
              "email": "joao@example.com",
              "password": "123456",
              "birth_date": "1990-01-15"
            },
            "validation": {
              "name": "string, min: 2, max: 100",
              "username": "string, min: 3, max: 50, apenas letras, números e underscore",
              "email": "string, email válido, max: 255",
              "password": "string, min: 6, max: 100",
              "birth_date": "string, formato: YYYY-MM-DD"
            }
          },
          "response": {
            "success": {
              "status": 201,
              "body": {
                "success": true,
                "message": "Usuário registrado com sucesso",
                "data": {
                  "user": {
                    "id": "550e8400-e29b-41d4-a716-446655440000",
                    "name": "João Silva",
                    "username": "joaosilva",
                    "email": "joao@example.com",
                    "birth_date": "1990-01-15",
                    "avatar_url": null,
                    "bio": null,
                    "status": "active",
                    "created_at": "2025-09-24T14:30:00.000Z"
                  },
                  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                }
              }
            },
            "error": {
              "status": 400,
              "body": {
                "success": false,
                "message": "Dados inválidos",
                "errors": [
                  {
                    "field": "email",
                    "message": "Email inválido"
                  }
                ]
              }
            },
            "conflict": {
              "status": 400,
              "body": {
                "success": false,
                "message": "Nome de usuário já está em uso"
              }
            }
          }
        },
  
        "login": {
          "method": "POST",
          "url": "/v1/auth/login",
          "description": "Fazer login do usuário",
          "authentication": false,
          "request": {
            "headers": {
              "Content-Type": "application/json"
            },
            "body": {
              "username": "joaosilva",
              "password": "123456"
            },
            "validation": {
              "username": "string, obrigatório",
              "password": "string, obrigatório"
            }
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Login realizado com sucesso",
                "data": {
                  "user": {
                    "id": "550e8400-e29b-41d4-a716-446655440000",
                    "name": "João Silva",
                    "username": "joaosilva",
                    "email": "joao@example.com",
                    "birth_date": "1990-01-15",
                    "avatar_url": null,
                    "bio": null,
                    "status": "active",
                    "created_at": "2025-09-24T14:30:00.000Z",
                    "updated_at": "2025-09-24T14:30:00.000Z"
                  },
                  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                }
              }
            },
            "error": {
              "status": 400,
              "body": {
                "success": false,
                "message": "Credenciais inválidas"
              }
            },
            "banned": {
              "status": 400,
              "body": {
                "success": false,
                "message": "Conta banida. Entre em contato com o suporte"
              }
            }
          }
        },
  
        "forgot_password": {
          "method": "POST",
          "url": "/v1/auth/forgot-password",
          "description": "Solicitar código de recuperação de senha",
          "authentication": false,
          "request": {
            "headers": {
              "Content-Type": "application/json"
            },
            "body": {
              "email": "joao@example.com"
            },
            "validation": {
              "email": "string, email válido"
            }
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Código de recuperação enviado para seu email"
              }
            },
            "not_found": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Se o email existir, um código foi enviado"
              },
              "note": "Por segurança, sempre retorna sucesso mesmo se email não existir"
            }
          }
        },
  
        "reset_password": {
          "method": "POST",
          "url": "/v1/auth/reset-password",
          "description": "Redefinir senha com código de recuperação",
          "authentication": false,
          "request": {
            "headers": {
              "Content-Type": "application/json"
            },
            "body": {
              "email": "joao@example.com",
              "code": "123456",
              "new_password": "novaSenha123"
            },
            "validation": {
              "email": "string, email válido",
              "code": "string, exatamente 6 dígitos numéricos",
              "new_password": "string, min: 6, max: 100"
            }
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Senha alterada com sucesso"
              }
            },
            "error": {
              "status": 400,
              "body": {
                "success": false,
                "message": "Código inválido ou expirado"
              }
            }
          }
        },
  
        "get_profile": {
          "method": "GET",
          "url": "/v1/auth/profile",
          "description": "Obter dados do perfil do usuário autenticado",
          "authentication": true,
          "request": {
            "headers": {
              "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "body": null
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Perfil obtido com sucesso",
                "data": {
                  "id": "550e8400-e29b-41d4-a716-446655440000",
                  "name": "João Silva",
                  "username": "joaosilva",
                  "email": "joao@example.com",
                  "birth_date": "1990-01-15",
                  "avatar_url": "https://example.com/avatar.jpg",
                  "bio": "Amante de livros e tecnologia",
                  "status": "active",
                  "created_at": "2025-09-24T14:30:00.000Z",
                  "updated_at": "2025-09-24T15:30:00.000Z"
                }
              }
            },
            "unauthorized": {
              "status": 401,
              "body": {
                "success": false,
                "message": "Token de acesso obrigatório"
              }
            }
          }
        },
  
        "update_profile": {
          "method": "PUT",
          "url": "/v1/auth/profile",
          "description": "Atualizar dados do perfil (nome, avatar, bio)",
          "authentication": true,
          "request": {
            "headers": {
              "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
              "Content-Type": "application/json"
            },
            "body": {
              "name": "João Santos Silva",
              "avatar_url": "https://example.com/novo-avatar.jpg",
              "bio": "Escritor e leitor apaixonado"
            },
            "validation": {
              "name": "string, min: 2, max: 100, opcional",
              "avatar_url": "string, URL válida, opcional",
              "bio": "string, max: 500, opcional"
            },
            "note": "Todos os campos são opcionais - envie apenas os que deseja atualizar"
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Perfil atualizado com sucesso",
                "data": {
                  "id": "550e8400-e29b-41d4-a716-446655440000",
                  "name": "João Santos Silva",
                  "username": "joaosilva",
                  "email": "joao@example.com",
                  "birth_date": "1990-01-15",
                  "avatar_url": "https://example.com/novo-avatar.jpg",
                  "bio": "Escritor e leitor apaixonado",
                  "status": "active",
                  "updated_at": "2025-09-24T16:30:00.000Z"
                }
              }
            }
          }
        },
  
        "change_password": {
          "method": "PUT",
          "url": "/v1/auth/change-password",
          "description": "Alterar senha do usuário autenticado",
          "authentication": true,
          "request": {
            "headers": {
              "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
              "Content-Type": "application/json"
            },
            "body": {
              "current_password": "senhaAtual123",
              "new_password": "novaSenhaSegura456"
            },
            "validation": {
              "current_password": "string, obrigatório",
              "new_password": "string, min: 6, max: 100"
            }
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Senha alterada com sucesso"
              }
            },
            "error": {
              "status": 400,
              "body": {
                "success": false,
                "message": "Senha atual incorreta"
              }
            }
          }
        },
  
        "change_email": {
          "method": "PUT",
          "url": "/v1/auth/change-email",
          "description": "Alterar email do usuário autenticado",
          "authentication": true,
          "request": {
            "headers": {
              "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
              "Content-Type": "application/json"
            },
            "body": {
              "new_email": "novoemail@example.com",
              "password": "senhaAtual123"
            },
            "validation": {
              "new_email": "string, email válido",
              "password": "string, obrigatório para confirmação"
            }
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Email alterado com sucesso",
                "data": {
                  "id": "550e8400-e29b-41d4-a716-446655440000",
                  "name": "João Silva",
                  "username": "joaosilva",
                  "email": "novoemail@example.com",
                  "birth_date": "1990-01-15",
                  "avatar_url": "https://example.com/avatar.jpg",
                  "bio": "Amante de livros e tecnologia",
                  "status": "active",
                  "updated_at": "2025-09-24T16:30:00.000Z"
                }
              }
            },
            "conflict": {
              "status": 400,
              "body": {
                "success": false,
                "message": "Este email já está em uso"
              }
            },
            "invalid_password": {
              "status": 400,
              "body": {
                "success": false,
                "message": "Senha incorreta"
              }
            }
          }
        },
  
        "verify_token": {
          "method": "GET",
          "url": "/v1/auth/verify-token",
          "description": "Verificar se token JWT é válido",
          "authentication": true,
          "request": {
            "headers": {
              "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "body": null
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Token válido",
                "data": {
                  "user": {
                    "id": "550e8400-e29b-41d4-a716-446655440000",
                    "name": "João Silva",
                    "username": "joaosilva",
                    "email": "joao@example.com",
                    "avatar_url": "https://example.com/avatar.jpg"
                  }
                }
              }
            },
            "invalid": {
              "status": 401,
              "body": {
                "success": false,
                "message": "Token inválido"
              }
            }
          }
        },
  
        "logout": {
          "method": "POST",
          "url": "/v1/auth/logout",
          "description": "Fazer logout do usuário (cliente deve remover token)",
          "authentication": true,
          "request": {
            "headers": {
              "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "body": null
          },
          "response": {
            "success": {
              "status": 200,
              "body": {
                "success": true,
                "message": "Logout realizado com sucesso"
              }
            }
          }
        },
  
        "not_found": {
          "method": "ANY",
          "url": "/qualquer-rota-inexistente",
          "description": "Endpoint não encontrado",
          "authentication": false,
          "request": {},
          "response": {
            "error": {
              "status": 404,
              "body": {
                "success": false,
                "message": "Endpoint não encontrado",
                "path": "/qualquer-rota-inexistente",
                "method": "GET"
              }
            }
          }
        }
      },
  
      "common_errors": {
        "validation_error": {
          "status": 400,
          "body": {
            "success": false,
            "message": "Dados inválidos",
            "errors": [
              {
                "field": "nome_do_campo",
                "message": "Mensagem de erro específica"
              }
            ]
          }
        },
        "unauthorized": {
          "status": 401,
          "body": {
            "success": false,
            "message": "Token de acesso obrigatório"
          }
        },
        "forbidden": {
          "status": 403,
          "body": {
            "success": false,
            "message": "Conta banida"
          }
        },
        "internal_error": {
          "status": 500,
          "body": {
            "success": false,
            "message": "Erro interno do servidor"
          }
        }
      },
  
      "authentication_flow": {
        "description": "Como usar autenticação JWT",
        "steps": [
          "1. Registrar usuário via POST /v1/auth/register",
          "2. Ou fazer login via POST /v1/auth/login",
          "3. Guardar o token JWT retornado",
          "4. Incluir o token no header Authorization: Bearer {token}",
          "5. Para rotas protegidas, sempre enviar o header de autorização"
        ],
        "token_format": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
        "token_expiry": "7 dias (configurável via JWT_EXPIRES_IN)"
      },
  
      "email_recovery_flow": {
        "description": "Fluxo de recuperação de senha",
        "steps": [
          "1. POST /v1/auth/forgot-password com email",
          "2. Sistema envia código de 6 dígitos por email",
          "3. Código expira em 15 minutos",
          "4. POST /v1/auth/reset-password com email, código e nova senha",
          "5. Código é invalidado após uso"
        ]
      },
  
      "notes": [
        "Todos os responses incluem campo 'success' (boolean)",
        "Timestamps estão em formato ISO 8601 UTC",
        "IDs são UUID v4",
        "Senhas são hasheadas com bcrypt (salt rounds: 12)",
        "Usernames são convertidos para lowercase automaticamente",
        "Emails são convertidos para lowercase automaticamente",
        "Códigos de recuperação têm 6 dígitos numéricos",
        "Avatar URLs devem ser válidas (http/https)",
        "Bio limitada a 500 caracteres",
        "Nome de usuário aceita apenas letras, números e underscore"
      ]
    }
  }